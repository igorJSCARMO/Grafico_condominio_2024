import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

# Dados
categorias = ['Janeiro', 'Fevereiro', 'Março' ]

Copasa =           [459.26, 501.22, 627.55]
Cemig =            [12, 59.23, 49.56]
Limpeza =          [150, 150, 150]
Material_Limpeza = [25, 25, 25]
Total =            [646.26, 735.45, 852.11]
Custo_Individual = [161.57, 183.86, 213.03]

# Criar dataFrame do gráfico
df = pd.DataFrame({
    'Copasa (R$)': Copasa,
    'Cemig (R$)': Cemig,
    'Limpeza (R$)': Limpeza,
    'Material Limpeza (R$)': Material_Limpeza,
}, index=categorias)

# Criar gráfico de barras empilhadas
ax = df.plot(kind='bar', stacked=True, figsize=(15, 10), zorder=2)

# Adicionar anotações aos pontos (opcional)
for i, valor in enumerate(Total):
    plt.text(i, valor + 5, str(valor), ha='center', va='bottom')

# Adicionar título e rótulos aos eixos
plt.title('Condomínio Ambrosina Sampaio 2024')
plt.xlabel('Meses')
plt.ylabel('Valores (R$)')

# Adicionar legenda
plt.legend(title='Categorias', loc='lower center')

# Adicionar grade ao gráfico com zorder mais alto
plt.grid(alpha=0.5, zorder=1)

# Salvando imagem do gráfico no windows (C:\Users\Igor CARMO)
plt.savefig('Condomínio Ambrosina Sampaio 2024.png')

# Mostrar o gráfico
plt.show()

# Criar dataFrame da tabela
df2 = pd.DataFrame({
    'Copasa (R$)': Copasa,
    'Cemig (R$)': Cemig,
    'Limpeza (R$)': Limpeza,
    'Material Limpeza (R$)': Material_Limpeza,
    'Total (R$)': Total,
    'Custo Individual (R$)': Custo_Individual,
})

display(df2)
